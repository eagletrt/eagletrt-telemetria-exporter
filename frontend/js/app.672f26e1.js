(function(t){function e(e){for(var n,c,o=e[0],i=e[1],l=e[2],d=0,f=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&f.push(a[c][0]),a[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],n=!0,o=1;o<s.length;o++){var i=s[o];0!==a[i]&&(n=!1)}n&&(r.splice(e--,1),t=c(c.s=s[0]))}return t}var n={},a={app:0},r=[];function c(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}c.m=t,c.c=n,c.d=function(t,e,s){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(c.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(s,n,function(e){return t[e]}.bind(null,n));return s},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=i;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"14cc":function(t,e,s){"use strict";s("a034")},2624:function(t,e,s){},"2bbb":function(t,e,s){"use strict";s("2624")},"2d03":function(t,e,s){"use strict";s("aa8d")},"3d98":function(t,e,s){"use strict";s("434a")},"434a":function(t,e,s){},"4e2b":function(t,e,s){"use strict";s("50f6")},"50f6":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("a79d");var n=s("2b0e"),a=s("5f5b"),r=(s("f9e3"),s("2dd8"),s("a4a1")),c=s.n(r),o=(s("f6b9"),s("2f62"));function i(t){for(const e in t)t[e]=t[e].sort()}s("ddb0"),s("2b3d");function l(){const t=new Date,e=t.getFullYear(),s=t.getMonth()+1,n=t.getDate(),a=t.getHours(),r=t.getMinutes(),c=t.getSeconds();return`${e}-${s}-${n}_${a}_${r}_${c}.zip`}function u(t){const e=window.URL.createObjectURL(new Blob([t])),s=document.createElement("a");s.href=e,s.setAttribute("download",l()),document.body.appendChild(s),s.click(),document.body.removeChild(s)}var d=s("bc3a"),f=s.n(d),m={host:"192.168.8.101",port:8e3,protocol:"http"};function p(){const t=new URL(window.location.href),e=t.searchParams.get("hostname"),s=t.searchParams.get("host")||m.host,n=t.searchParams.get("port")||m.port;return e||`${s}:${n}`}const b=p(),h=m.protocol;async function g(){const t=await f.a.get(`${h}://${b}/api/database-schema`);return t.data}async function E(t){const e={collectionsToExport:t},s=await f.a.post(`${h}://${b}/api/export/json`,e,{responseType:"blob"});return s.data}async function I(t){const e={collectionsToExport:t},s=await f.a.post(`${h}://${b}/api/export/csv`,e,{responseType:"blob"});return s.data}n["default"].use(o["a"]);const y={NONE:-1,FETCHING:0,EDITING:1,EXPORTING:2,FETCHING_ERROR:3,EXPORTING_ERROR:4},C=new o["a"].Store({state:{databaseSchema:{},currentDatabase:-1,selectedItems:{},message:"",status:y.NONE},getters:{databases:function(t){return t.databaseSchema?Object.keys(t.databaseSchema):[]},currentDatabaseName:function(t,e){return-1===t.currentDatabase?null:e.databases[t.currentDatabase]},currentCollections:function(t,e){const s=(e,s)=>t.selectedItems[e]&&t.selectedItems[e].includes(s),n=e.currentDatabaseName;return n?t.databaseSchema[n].map(t=>({label:t,selected:s(n,t)})):[]}},mutations:{setDatabaseSchema:function(t,e){t.databaseSchema=e,t.currentDatabase=-1,t.selectedItems={}},setCurrentDatabase:function(t,e){t.currentDatabase=e},setSelectedItems:function(t,e){t.selectedItems=e},setLoading:function(t,e){t.loading=e},setMessage:function(t,e){t.message=e},setStatus:function(t,e){t.status=e}},actions:{setStatus:function({commit:t},e){switch(e){case y.FETCHING:t("setMessage","Fetching database schema");break;case y.EXPORTING:t("setMessage","Exporting selected collections");break;case y.FETCHING_ERROR:t("setMessage","Error in fetching database");break;case y.EXPORTING_ERROR:t("setMessage","Error in exporting collections");break;default:t("setMessage","");break}t("setStatus",e)},fetchDatabaseSchema:async function({commit:t,state:e,dispatch:s}){if(e.status===y.NONE||e.status===y.FETCHING_ERROR||e.status===y.EXPORTING){s("setStatus",y.FETCHING);try{const e=await g();i(e),t("setDatabaseSchema",e),s("setStatus",y.EDITING)}catch(n){console.error("Error in fetching database",n),s("setStatus",y.FETCHING_ERROR)}}},selectDatabase:function({commit:t,state:e},s){e.status===y.EDITING&&t("setCurrentDatabase",s)},addCollection:function({commit:t,state:e},{db:s,collection:n}){if(e.status===y.EDITING){const a={...e.selectedItems};a[s]?a[s].push(n):a[s]=[n],t("setSelectedItems",a)}},removeCollection:function({commit:t,state:e},{db:s,collection:n}){if(e.status===y.EDITING){const a={...e.selectedItems},r=a[s].indexOf(n);a[s].splice(r,1),a[s].length||delete a[s],t("setSelectedItems",a)}},exportJson:async function({state:t,dispatch:e}){if(t.status===y.EDITING){e("setStatus",y.EXPORTING);try{const s=await E(t.selectedItems);u(s),e("fetchDatabaseSchema")}catch(s){console.error("Error in exporting collections as json",s),e("setStatus",y.EXPORTING_ERROR)}}},exportCsv:async function({state:t,dispatch:e}){if(t.status===y.EDITING){e("setStatus",y.EXPORTING);try{const s=await I(t.selectedItems);u(s),e("fetchDatabaseSchema")}catch(s){console.error("Error in exporting collections as csv",s),e("setStatus",y.EXPORTING_ERROR)}}},backToEditing:async function({state:t,dispatch:e,commit:s}){t.status!==y.EXPORTING&&t.status!==y.EXPORTING_ERROR||e("setStatus",y.EDITING)}}});var v=C,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex align-items-center justify-content-center",attrs:{id:"app"}},[s("items-selector")],1)},_=[],R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("perfect-scrollbar",{staticClass:"items-selector container"},[s("items-selector-title"),t.loading?s("items-selector-loading",{attrs:{message:t.message}}):t._e(),t.error?s("items-selector-error",{attrs:{message:t.message}}):t._e(),t.editing?s("items-selector-content",{attrs:{databases:t.databases,currentDatabase:t.currentDatabase,collections:t.currentCollections,selectedItems:t.selectedItems}}):t._e(),s("items-selector-buttons",{attrs:{type:t.buttonType,disabled:!t.editing||t.noneSelected}})],1)},x=[],S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"items-selector-title row justify-content-center"},[s("div",{staticClass:"col"},[s("h1",{staticClass:"title"},[t._v(t._s(t.text))])])])},N=[],T={name:"ItemsSelectorTitle",props:{text:{type:String,default:"Telemetria"}}},$=T,D=(s("e3cf"),s("2877")),j=Object(D["a"])($,S,N,!1,null,"06ef4204",null),w=j.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"items-selector-content row justify-content-center"},[s("div",{staticClass:"col"},[s("database-items",{attrs:{databases:t.databases,selected:t.currentDatabase}})],1),s("div",{staticClass:"col"},[s("collection-items",{attrs:{collections:t.collections}})],1),s("div",{staticClass:"col"},[s("selected-items",{attrs:{selectedItems:t.selectedItems}})],1)])},k=[],P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"collectionItems"},t._l(t.collections,(function(e){var n=e.label,a=e.selected;return s("item",{key:n,attrs:{type:"COLLECTION",text:n,selected:a},on:{itemClicked:function(e){return t.toggleCollection(n,a)}}})})),1)},B=[],L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.itemClass},[s("span",{on:{click:function(e){return t.itemClicked()}}},[t._v(t._s(t.text))])])},X=[],F={name:"Item",props:{text:{type:String,required:!0},type:{validator:function(t){return["DB","COLLECTION"].includes(t)},required:!0},selected:{type:Boolean,default:!1},erased:{type:Boolean,default:!1}},computed:{itemClass:function(){return{item:!0,selected:this.selected,erased:this.erased,database:"DB"===this.type,collection:"COLLECTION"===this.type}}},methods:{itemClicked(){this.$emit("itemClicked")}}},H=F,M=(s("c9b6"),Object(D["a"])(H,L,X,!1,null,"4257e83e",null)),q=M.exports,A={name:"CollectionItems",components:{Item:q},props:{collections:{type:Array,default:()=>[]}},computed:{database:function(){return this.$store.getters.currentDatabaseName}},methods:{toggleCollection(t,e){const s={db:this.database,collection:t};e?this.$store.dispatch("removeCollection",s):this.$store.dispatch("addCollection",s)}}},J=A,U=Object(D["a"])(J,P,B,!1,null,null,null),Y=U.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"databaseItems"},t._l(t.databases,(function(e,n){return s("item",{key:e,attrs:{type:"DB",text:e,selected:n===t.selected},on:{itemClicked:function(e){return t.selectDatabase(n)}}})})),1)},V=[],K={name:"DatabaseItems",components:{Item:q},props:{databases:{type:Array,default:()=>[]},selected:{type:Number,default:-1}},methods:{selectDatabase(t){this.$store.dispatch("selectDatabase",t)}}},Q=K,W=Object(D["a"])(Q,z,V,!1,null,null,null),Z=W.exports,tt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.selectedItems},t._l(t.databases,(function(e){return s("div",{key:e,staticClass:"db-container"},[s("item",{attrs:{type:"DB",text:e,selected:""}}),t._l(t.selectedItems[e],(function(n){return s("div",{key:n},[s("item",{attrs:{erased:"",type:"COLLECTION",text:n},on:{itemClicked:function(s){return t.removeCollection(e,n)}}})],1)}))],2)})),0)},et=[],st={name:"SelectedItems",components:{Item:q},props:{selectedItems:{type:Object,default:()=>{}}},computed:{databases:function(){return Object.keys(this.selectedItems||{})}},methods:{removeCollection(t,e){this.$store.dispatch("removeCollection",{db:t,collection:e})}}},nt=st,at=(s("601d"),Object(D["a"])(nt,tt,et,!1,null,"41695cf2",null)),rt=at.exports,ct={name:"ItemsSelectorContent",components:{DatabaseItems:Z,CollectionItems:Y,SelectedItems:rt},props:{databases:{type:Array,default:()=>[]},currentDatabase:{type:Number,default:-1},collections:{type:Array,default:()=>[]},selectedItems:{type:Object,default:()=>{}}}},ot=ct,it=(s("4e2b"),Object(D["a"])(ot,G,k,!1,null,"d02cdbd4",null)),lt=it.exports,ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"items-selector-loading row justify-content-center"},[s("div",{staticClass:"col text-center"},[s("eagle-spinner",{staticClass:"d-inline-block"}),s("loading-label",{staticClass:"d-inline-block",attrs:{text:t.message}})],1)])},dt=[],ft=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"eagle-spinner"},[s("picture",[s("source",{attrs:{srcset:"logo.webp",type:"image/webp"}}),s("source",{attrs:{srcset:"logo.png",type:"image/png"}}),s("img",{style:t.style,attrs:{src:"logo.png",alt:"eagle-logo"}})])])},mt=[],pt={name:"EagleSpinner",props:{width:{type:Number,default:135},height:{type:Number,default:135}},computed:{style:function(){return{width:this.width+"px",height:this.height+"px"}}}},bt=pt,ht=(s("14cc"),Object(D["a"])(bt,ft,mt,!1,null,"c04a0e7a",null)),gt=ht.exports,Et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loading-label"},[s("h1",[t._v(t._s(t.text)+t._s(t.dots)+t._s(t.spaces))])])},It=[],yt={name:"LoadingLabel",props:{text:{type:String,required:!0}},data:function(){return{dotsNumber:3,interval:1e3}},computed:{dots:function(){return[...Array(this.dotsNumber).keys()].map(t=>".").join("")},spaces:function(){return[...Array(3-this.dotsNumber).keys()].map(t=>" ").join("")}},methods:{updateDots(){this.dotsNumber=(this.dotsNumber+1)%4}},mounted(){setInterval(()=>this.updateDots(),this.interval)}},Ct=yt,vt=(s("fb61"),Object(D["a"])(Ct,Et,It,!1,null,"0d300436",null)),Ot=vt.exports,_t={name:"ItemsSelectorLoading",components:{EagleSpinner:gt,LoadingLabel:Ot},props:{message:{type:String,required:!0}}},Rt=_t,xt=(s("2bbb"),Object(D["a"])(Rt,ut,dt,!1,null,"78757bd4",null)),St=xt.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"items-selector-error row justify-content-center"},[s("div",{staticClass:"col text-center"},[s("eagle-logo",{staticClass:"d-inline-block"}),s("error-label",{staticClass:"d-inline-block",attrs:{text:t.message}})],1)])},Tt=[],$t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"eagle-logo"},[s("picture",{style:t.style},[s("source",{attrs:{srcset:"logo.webp",type:"image/webp"}}),s("source",{attrs:{srcset:"logo.png",type:"image/png"}}),s("img",{style:t.style,attrs:{src:"logo.png",alt:"eagle-logo"}})])])},Dt=[],jt={name:"EagleLogo",props:{width:{type:Number,default:135},height:{type:Number,default:135}},computed:{style:function(){return{width:this.width+"px",height:this.height+"px"}}}},wt=jt,Gt=(s("d9d8"),Object(D["a"])(wt,$t,Dt,!1,null,"6a079505",null)),kt=Gt.exports,Pt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"error-label"},[s("h1",[t._v(t._s(t.text))])])},Bt=[],Lt={name:"ErrorLabel",props:{text:{type:String,required:!0}}},Xt=Lt,Ft=(s("b292"),Object(D["a"])(Xt,Pt,Bt,!1,null,"dce31922",null)),Ht=Ft.exports,Mt={name:"ItemsSelectorError",components:{EagleLogo:kt,ErrorLabel:Ht},props:{message:{type:String,required:!0}}},qt=Mt,At=(s("9652"),Object(D["a"])(qt,Nt,Tt,!1,null,"62dd15dc",null)),Jt=At.exports,Ut=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"items-selector-buttons row justify-content-center no-gutters"},["EDITING"===t.type?s("items-selector-editing-buttons",{attrs:{disabled:t.disabled}}):t._e(),"REFRESH"===t.type?s("items-selector-refresh-buttons",{attrs:{disabled:t.disabled}}):t._e(),"EXPORTING_ERROR"===t.type?s("items-selector-exporting-error-buttons",{attrs:{disabled:t.disabled}}):t._e()],1)},Yt=[],zt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"items-selector-editing-buttons col text-center"},[s("eagle-button",{staticClass:"export-button",attrs:{text:"JSON",disabled:t.disabled},on:{eagleClick:function(e){return t.exportJson()}}}),s("eagle-button",{staticClass:"export-button",attrs:{text:"CSV",disabled:t.disabled},on:{eagleClick:function(e){return t.exportCsv()}}})],1)},Vt=[],Kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"eagle-spinner"},[s("b-button",{attrs:{variant:"outline-primary",disabled:t.disabled},on:{click:function(e){return t.eagleClick()}}},[t._v(t._s(t.text))])],1)},Qt=[],Wt={name:"EagleButton",props:{text:{type:String,required:!0},disabled:{type:Boolean,default:!1}},methods:{eagleClick(){this.disabled||this.$emit("eagleClick")}}},Zt=Wt,te=(s("3d98"),Object(D["a"])(Zt,Kt,Qt,!1,null,"daea3298",null)),ee=te.exports,se={name:"ItemsSelectorEditingButtons",components:{EagleButton:ee},props:{disabled:{type:Boolean,default:!1}},methods:{exportJson(){this.$store.dispatch("exportJson")},exportCsv(){this.$store.dispatch("exportCsv")}}},ne=se,ae=(s("2d03"),Object(D["a"])(ne,zt,Vt,!1,null,"23868d46",null)),re=ae.exports,ce=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"items-selector-refresh-buttons col text-center"},[s("eagle-button",{attrs:{text:"RETRY",disabled:t.disabled},on:{eagleClick:function(e){return t.refresh()}}})],1)},oe=[],ie={name:"ItemsSelectorRefreshButtons",components:{EagleButton:ee},data:function(){return{disabled:!1}},methods:{refresh(){this.disabled=!0,this.$store.dispatch("fetchDatabaseSchema")}}},le=ie,ue=Object(D["a"])(le,ce,oe,!1,null,"5154771c",null),de=ue.exports,fe=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"items-selector-exporting-error-buttons col text-center"},[s("eagle-button",{attrs:{text:"UNDERSTOOD",disabled:t.disabled},on:{eagleClick:function(e){return t.understood()}}})],1)},me=[],pe={name:"ItemsSelectorExportingErrorButtons",components:{EagleButton:ee},data:function(){return{disabled:!1}},methods:{understood(){this.disabled=!0,this.$store.dispatch("backToEditing")}}},be=pe,he=Object(D["a"])(be,fe,me,!1,null,"561f5389",null),ge=he.exports,Ee={name:"ItemsSelectorButtons",components:{ItemsSelectorEditingButtons:re,ItemsSelectorRefreshButtons:de,ItemsSelectorExportingErrorButtons:ge},props:{type:{validator:function(t){return["EDITING","REFRESH","EXPORTING_ERROR"].includes(t)},required:!0},disabled:{type:Boolean,default:!1}}},Ie=Ee,ye=Object(D["a"])(Ie,Ut,Yt,!1,null,"3bc5a0b6",null),Ce=ye.exports,ve={name:"ItemsSelector",components:{PerfectScrollbar:r["PerfectScrollbar"],ItemsSelectorButtons:Ce,ItemsSelectorContent:lt,ItemsSelectorLoading:St,ItemsSelectorError:Jt,ItemsSelectorTitle:w},computed:{databaseSchema:function(){return this.$store.state.databaseSchema},currentDatabase:function(){return this.$store.state.currentDatabase},databases:function(){return this.$store.getters.databases},currentCollections:function(){return this.$store.getters.currentCollections},selectedItems:function(){return this.$store.state.selectedItems},noneSelected:function(){return 0===Object.keys(this.selectedItems).length},status:function(){return this.$store.state.status},loading:function(){const t=this.$store.state.status;return t===y.FETCHING||t===y.EXPORTING},editing:function(){const t=this.$store.state.status;return t===y.EDITING},error:function(){const t=this.$store.state.status;return t===y.FETCHING_ERROR||t===y.EXPORTING_ERROR},message:function(){return this.$store.state.message},buttonType:function(){switch(this.$store.state.status){case y.NONE:case y.FETCHING:case y.EXPORTING:case y.EDITING:return"EDITING";case y.FETCHING_ERROR:return"REFRESH";case y.EXPORTING_ERROR:return"EXPORTING_ERROR";default:return"EDITING"}}},created(){this.$store.dispatch("fetchDatabaseSchema")}},Oe=ve,_e=(s("acff"),Object(D["a"])(Oe,R,x,!1,null,"50b5bb68",null)),Re=_e.exports,xe={name:"app",components:{ItemsSelector:Re}},Se=xe,Ne=(s("5c0b"),s("5c64"),Object(D["a"])(Se,O,_,!1,null,null,null)),Te=Ne.exports;n["default"].config.productionTip=!0,n["default"].use(a["a"]),n["default"].use(c.a),new n["default"]({store:v,render:t=>t(Te)}).$mount("#app")},"5b80":function(t,e,s){},"5c0b":function(t,e,s){"use strict";s("9c0c")},"5c64":function(t,e,s){"use strict";s("d32a")},"601d":function(t,e,s){"use strict";s("8cc6")},"8cc6":function(t,e,s){},"90cf":function(t,e,s){},9652:function(t,e,s){"use strict";s("da9c")},"96a0":function(t,e,s){},"9c0c":function(t,e,s){},a034:function(t,e,s){},aa8d:function(t,e,s){},acff:function(t,e,s){"use strict";s("b0ce")},b0ce:function(t,e,s){},b292:function(t,e,s){"use strict";s("90cf")},c9b6:function(t,e,s){"use strict";s("f462")},d32a:function(t,e,s){},d9d8:function(t,e,s){"use strict";s("96a0")},da9c:function(t,e,s){},e3cf:function(t,e,s){"use strict";s("e8fd")},e8fd:function(t,e,s){},f462:function(t,e,s){},fb61:function(t,e,s){"use strict";s("5b80")}});
//# sourceMappingURL=app.672f26e1.js.map